# This workflow will build a Java project with Maven
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI 11

on:
  push:
    branches: [ feature/cloud_crud ]
  pull_request:
    branches: [ feature/cloud_crud ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up Cloud SDK
      uses: google-github-actions/setup-gcloud@master
      with:
        service_account_key: "-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCyyXuFQee2ADQU\n1BEF4unMR6oSVdSWcnRvw7aWbqpxJUmEcepPDu1meiHbclYi8kqsV6JAOtqeCiBK\nrEq2se0gYOEvrtoWK9OpbbNbUJeElw+NREozgYkiJF//rroOlKcGemGcJTA7i7sJ\n8clIPZP9mki7xRX1bXf9X/hyb/Ubl34JoKUcg4L362BZhMiP40tOPzEU/BSB+yEv\ntGOBheVXP2XeR2L+uvWNYDWLPYB8jeXPlTU0KqsEqfLnzyfKuzg5Ybmf4mmoes7C\nvYhaJvYfA/AIAXENR/Az6Fb7irkQZyVFstZrEgqNpzOHqVyv6oHKwWJzc6+FPxMf\nZ7h664T1AgMBAAECggEAD6UwCPY+d5/G7ver0a8MtJKk4FvgcZXseIdQ6BMhGSuh\nJlTtoyN0RN51LgXwYbiALlqw2RwNW30ZXE99bkVdsdKoggq0DPKi4BW4d0ozKCgr\n9Tm/oIg6XuF+ARriLzp0700wU4CxmtRcdr9Q1OCGnc+tg7j4dfSxZlvKmwEPGu3e\nTCKDE+ZkQM0FgBZKo/pXNFROc7tj4xfJojuhw7bt4deOVi03nsuLQsxHGS6mvuty\nIl3ky6i2pvTKMU2YMLqN+L5aFcafn8EtgKrUxxVDKGUN9lQK2+JyO/3UpV4oEIi0\nbA8RG/1098BFXoWyxc4eHr6owTLGSzurX5iD4XtsVQKBgQDnRd3yZi/gQcX0xESb\n9a9/VFSn0s3HIYIEs4iXxh8+Rob7Bvh8cN4IbjqzHNEKWhOAfgDSZ/iiGL+QzV7O\nKVnmREePU2MKxFK0SYsPwzyBv3nSZKOZvxTe04mcjPKjyeSnCtFAaqph90fRafbe\nXcZavaNm8ws5HMvOZxnnNtBCswKBgQDF5wiAsvU4D/Ipg35053jMnau9cFgC5hb2\nzzsbWeFWGhMop5C006AJinoxWQ2byKhTeMVNWL0GNp7CbadpX4zbEpf2miLoOd7u\nELqZACu/3yaOgtM7KhLVc9RSSEI5faXwEWP3cbdLgerqt9RzLviiNtGsaLnnvng9\np7+IxhRNtwKBgQDM0gKbX8a8zGN9v6inmvHfSZdjvf1Cgzl74mhxSiR3acy3WtgM\nlYT+YGkaIcY8bcPhwzYFIdF/9X0Kx+dTnCmjFgtuMsJ/UZmRU6SVxCm9Gw/PthNx\n4VmhciTogaeOSQp4qcriStU0x+RR4Y+iJdi6mkKxtUPWQ9t3o7W8IL5WowKBgGp6\nVKPSJYflZHibjCVgCSmmR6nkUSY2H/LpKrcbk9bcrqQ4C+6O0lNv0zDL5juEKbTH\njPiBnypBpwebMfDK/SE9js+avN9Pi7dw/sSlR+SzLq6MixQRHhMEgB9JS4BdLzPM\nV4niACm7G+bvw3m5swKsFgH6UtPyMgWSRMZVNMVfAoGBAJyDqbknxo+dV+oklC27\ny5AiKyGuX2mudoEZZBc6sQ1QYuGuVvNM1li3bhshw2XBnW49I+EVbSO2FyHxutfN\n7bFr5bfVAuIZsDb6X6CYYeynK9D97mMkA52ihZqGUlWRfr/P1k6YON9ub/8zIpAN\n5XpPlU0ylRhL1ucjw5DPKheZ\n-----END PRIVATE KEY-----\n"
        export_default_credentials: true

    - name: Checking Docker
      run: docker pull gcr.io/cloud-spanner-emulator/emulator
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Build with Maven
      run: mvn -B package --file pom.xml
